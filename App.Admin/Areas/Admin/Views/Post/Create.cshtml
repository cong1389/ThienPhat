@using App.Domain.Common
@using App.Framework.Ultis
@using Resources
@model App.FakeEntity.Post.PostViewModel
@{
    ViewBag.Title = UI.CreateNew;
    ViewBag.Toolbar = new[] { "Save", "SaveNew", "Divider", "Back" };
}
@using (Html.BeginForm("Create", "Post", FormMethod.Post, new { data_container = ViewContext.RouteData.Values["controller"], enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <div class="form-body">
            @Html.ValidationSummary(true, "", new { @class = "text-danger col-md-offset-3" })
            <div class="tabbable-line">
                <ul class="nav nav-tabs ">
                    <li class="active">
                        <a href="#tab_1" data-toggle="tab">Thông tin sản phẩm</a>
                    </li>
                    <li>
                        <a href="#tab_2" data-toggle="tab">Thuộc tính sản phẩm</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane active" id="tab_1">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.Title, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        @Html.TextBoxFor(model => model.Title, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.Title, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.ProductCode, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        @Html.TextBoxFor(model => model.ProductCode, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.ProductCode, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.Price, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        @Html.TextBoxFor(model => model.Price, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.Price, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.Discount, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        @Html.TextBoxFor(model => model.Discount, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.Discount, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.MenuId, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        @Html.DropDownListFor(x => x.MenuId, new SelectList(ViewBag.MenuList ?? string.Empty, "Id", "MenuName"), "--Select--", new { @class = "form-control select2" })
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.OrderDisplay, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        @Html.TextBoxFor(model => model.OrderDisplay, new { @class = "form-control", @value = "0" })
                                        @Html.ValidationMessageFor(model => model.OrderDisplay, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.Label(FormUI.OptionDisplay, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        <div class="checkbox-list">
                                            <label class="checkbox-inline">
                                                @Html.CheckBoxFor(x => x.OutOfStock) @FormUI.OutOfStock
                                            </label>
                                            <label class="checkbox-inline">
                                                @Html.CheckBoxFor(x => x.ProductHot) @Html.Raw("Hiện trang chủ")
                                            </label>
                                            <label class="checkbox-inline">
                                                @Html.CheckBoxFor(x => x.ProductNew) @Html.Raw("Sản phẩm hot")
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                        </div>
                        <div class="row">
                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.Image, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        <div class="fileinput fileinput-new" data-provides="fileinput">
                                            <div class="input-group input-large">
                                                <div class="form-control uneditable-input input-fixed input-medium" data-trigger="fileinput">
                                                    <i class="fa fa-file fileinput-exists"></i>&nbsp;
                                                    <span class="fileinput-filename"> </span>
                                                </div>
                                                <span class="input-group-addon btn default btn-file">
                                                    <span class="fileinput-new">@Resources.FormUI.SelectFile</span>
                                                    <span class="fileinput-exists"> @Resources.FormUI.ChangeFile </span>
                                                    @Html.TextBoxFor(model => model.Image, new { @type = "file" })
                                                    @*<input type="file" name="FileUpload" />*@
                                                </span>
                                                <a href="javascript:;" class="input-group-addon btn red fileinput-exists" data-dismiss="fileinput"> Remove </a>
                                            </div>
                                        </div>
                                        @Html.ValidationMessageFor(model => model.Image, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.Label(FormUI.OldOrNew, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        <div class="checkbox-list">
                                            <label class="checkbox-inline">
                                                @Html.CheckBoxFor(x => x.OldOrNew) @FormUI.OldOrNew
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                @Html.LabelFor(model => model.ShortDesc, new { @class = "col-lg-offset-1 col-sm-11 " })
                            </div>
                            <!--/span-->
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <div class="col-md-12">
                                    @Html.TextAreaFor(model => model.ShortDesc, new { @class = "form-control ckeditor" })
                                    @Html.ValidationMessageFor(model => model.ShortDesc, "", new { @class = "help-block" })
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                @Html.LabelFor(model => model.TechInfo, new { @class = "col-lg-offset-1 col-sm-11 " })
                            </div>
                            <!--/span-->
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    @*@Html.LabelFor(model => model.Description, new { @class = "control-label col-md-3 col-md-offset-3" })*@
                                    <div class="col-md-12">
                                        @Html.TextAreaFor(model => model.TechInfo, new { @class = "form-control ckeditor" })
                                        @Html.ValidationMessageFor(model => model.TechInfo, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                @Html.LabelFor(model => model.Description, new { @class = "col-lg-offset-1 col-sm-11 " })
                            </div>
                            <!--/span-->
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    @*@Html.LabelFor(model => model.Description, new { @class = "control-label col-md-3 col-md-offset-3" })*@
                                    <div class="col-md-12">
                                        @Html.TextAreaFor(model => model.Description, new { @class = "form-control ckeditor" })
                                        @Html.ValidationMessageFor(model => model.Description, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.MetaTitle, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        @Html.TextBoxFor(model => model.MetaTitle, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.MetaTitle, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.MetaKeywords, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        @Html.TextBoxFor(model => model.MetaKeywords, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.MetaKeywords, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.MetaDescription, new { @class = "control-label col-md-3 " })
                                    <div class="col-md-9">
                                        @Html.TextBoxFor(model => model.MetaDescription, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.MetaDescription, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.Status, new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        <div class="radio-list">
                                            <label class="radio-inline">
                                                @Html.RadioButtonFor(x => x.Status, (int)Status.Enable) @UI.Active
                                            </label>
                                            <label class="radio-inline">
                                                @Html.RadioButtonFor(x => x.Status, (int)Status.Disable) @UI.InActive
                                            </label>
                                        </div>
                                        @Html.ValidationMessageFor(model => model.Status, "", new { @class = "help-block" })
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                        </div>
                    </div>
                    <div class="tab-pane" id="tab_2">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <div class="col-md-10 col-sm-offset-2">
                                        <div id="Attributes" class="checkbox-list">
                                            @if (ViewBag.Attributes != null)
                                            {
                                                foreach (App.Domain.Entities.Attribute.Attribute item in (List<App.Domain.Entities.Attribute.Attribute>)ViewBag.Attributes)
                                                {
                                                    <h3 class="form-section">@item.AttributeName</h3>
                                                    foreach (var value in item.AttributeValues)
                                                    {
                                                        <div class="value-block">
                                                            <label>
                                                                <input id="Values" name="Values" onclick="handleCheckAttr(this)" type="checkbox" value="@value.Id" class="attribute"> @value.ValueName
                                                            </label>
                                                            <div id="@value.Id" class="img-upload"></div>
                                                            <div id="@Html.Raw("fileupload_" + value.Id)" class="item_upload">

                                                            </div>
                                                        </div>
                                                    }
                                                }
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
@section scripts{
    <script src="@Url.FakePathAdmin("scripts/plugins/ckeditor/ckeditor.js")"></script>
    <script src="@Url.FakePathAdmin("scripts/plugins/ckeditor/config.js")"></script>
    <script src="@Url.FakePathAdmin("scripts/plugins/uploadfile/jquery.filer.min.js")"></script>
    <script src="@Url.FakePathAdmin("scripts/custom.uploadfile.normal.js")"></script>
    @*<script src="@Url.FakePathAdmin("scripts/plugins/daterangepicker/moment.min.js")"></script>*@
    @*<script src="@Url.FakePathAdmin("scripts/plugins/daterangepicker/daterangepicker.js")"></script>*@
    @*<script src="@Url.FakePathAdmin("scripts/plugins/daterangepicker/bootstrap-datepicker.js")"></script>*@
    @*<script src="@Url.FakePathAdmin("scripts/components-date-time-pickers.js")"></script>*@
    <script type="text/javascript">
        var handleCheckAttr = function (element) {
            if (typeof element != "object" || element.type != "checkbox") {
                return false;
            }
            if (element.checked) {
                var id = $(element).val();
                var moreproce = '<div class="col-md-12"><div class="form-group"><label class="control-label col-sm-3" style="text-align:left">Giá: </label><div class="col-md-3">' +
                    '<input type="number" class="form-control" name="' + id + '"  id="more_' + id + '"></div></div></div>';
                var btn = '<button type="button" attr-data="' + id + '" id="btn_upload" class="btn green">Thêm ảnh</button>';
                $("div#" + id).append(moreproce);
                $("div#" + id).append(btn);
            } else {
                var id = $(element).val();
                $("#" + id).empty();
                $("#fileupload_" + id).empty();
            }
            $.uniform.update();
        }
        $(function () {
            $(document).on("click", "#btn_upload", function () {

                var id = $(this).attr("attr-data");
                var file = '<input type="file" name="' + id + '" id="file_' + id + '" multiple="multiple">';
                $("div#fileupload_" + id).empty();
                $("div#fileupload_" + id).append(file);
                InitUploadFile("#file_" + id);
            });

        });
    </script>
}
@section style{
    <link href="@Url.FakePathAdmin("content/plugins/uploafile/jquery.filer.css")" rel="stylesheet" />
    @*<link href="@Url.FakePathAdmin("content/plugins/uploafile/themes/jquery.filer-dragdropbox.css")" rel="stylesheet" />*@
    @*<link href="@Url.FakePathAdmin("content/plugins/daterangepicker/daterangepicker-bs3.css")" rel="stylesheet" />*@
    <style>
        .img-upload button {
            margin-bottom: 15px;
        }
    </style>
}
